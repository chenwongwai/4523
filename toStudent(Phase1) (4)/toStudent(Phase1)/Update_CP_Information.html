<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>更新个人资料 | XX公司</title>
    <link rel="stylesheet" href="common.css">
    <style>
        /* 顾客个人资料专用样式 */
        .profile-header {
            display: flex;
            align-items: center;
            margin-bottom: 2rem;
        }

        .avatar-upload {
            position: relative;
            margin-right: 2rem;
        }

        .avatar-image {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--primary-color);
        }

        .avatar-edit {
            position: absolute;
            bottom: 0;
            right: 0;
            background: var(--primary-color);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .form-section {
            background: white;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--box-shadow);
            margin-bottom: 2rem;
        }

        .form-section h3 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #eee;
        }

        /* 密码强度指示器 */
        .password-strength {
            height: 5px;
            background: #eee;
            margin-top: 0.5rem;
            border-radius: 3px;
            overflow: hidden;
        }

        .strength-meter {
            height: 100%;
            width: 0;
            transition: width 0.3s;
        }

        /* 响应式调整 */
        @media (max-width: 768px) {
            .profile-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .avatar-upload {
                margin-right: 0;
                margin-bottom: 1rem;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- 顾客版导航栏 -->
    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-left">
                <button class="nav-back-btn" onclick="history.back()">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                </button>
                <div class="breadcrumb">
                    <span>客戶中心</span>
                    <span class="divider">/</span>
                    <span id="pageTitle">個人資料</span>
                </div>
            </div>
            <div class="nav-right">
                <div class="user-avatar">C</div> <!-- C代表Customer -->
            </div>
        </div>
    </nav>

    <!-- 主内容区 -->
    <div class="container">
        <h2 class="page-title">更新個人資料</h2>
        
        <!-- 头像上传区 -->
        <div class="profile-header">
            <div class="avatar-upload">
                <img src="https://via.placeholder.com/100?text=Customer" alt="用戶頭像" class="avatar-image" id="avatarImage">
                <div class="avatar-edit" onclick="document.getElementById('avatarFile').click()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/>
                    </svg>
                </div>
                <input type="file" id="avatarFile" accept="image/*" hidden onchange="previewAvatar(this)">
            </div>
            <div>
                <h3 style="margin:0">李小明</h3>
                <p style="color:var(--text-light);margin:0.5rem 0 0">會員等級: 黃金會員</p>
            </div>
        </div>

        <!-- 基本资料表单 -->
        <div class="form-section">
            <h3>基本資料</h3>
            <div class="form-grid">
                <div class="input-group">
                    <label for="firstName">姓氏</label>
                    <input type="text" id="firstName" value="李">
                </div>
                <div class="input-group">
                    <label for="lastName">名字</label>
                    <input type="text" id="lastName" value="小明">
                </div>
            </div>
            <div class="form-grid">
                <div class="input-group">
                    <label for="email">電子郵件</label>
                    <input type="email" id="email" value="customer@example.com">
                </div>
                <div class="input-group">
                    <label for="phone">電話號碼</label>
                    <input type="tel" id="phone" value="+852 9876 5432">
                </div>
            </div>
            <div class="input-group">
                <label for="birthday">出生日期</label>
                <input type="date" id="birthday" value="1990-01-01">
            </div>
        </div>

        <!-- 密码修改表单 -->
        <div class="form-section">
            <h3>密碼設定</h3>
            <div class="input-group">
                <label for="currentPassword">當前密碼</label>
                <input type="password" id="currentPassword" placeholder="輸入當前密碼">
            </div>
            <div class="form-grid">
                <div class="input-group">
                    <label for="newPassword">新密碼</label>
                    <input type="password" id="newPassword" placeholder="輸入新密碼" oninput="checkPasswordStrength(this.value)">
                    <div class="password-strength">
                        <div class="strength-meter" id="strengthMeter"></div>
                    </div>
                </div>
                <div class="input-group">
                    <label for="confirmPassword">確認新密碼</label>
                    <input type="password" id="confirmPassword" placeholder="再次輸入新密碼">
                </div>
            </div>
        </div>

        <!-- 收货地址表单 -->
        <div class="form-section">
            <h3>送貨地址</h3>
            <div class="input-group">
                <label for="address">街道地址</label>
                <input type="text" id="address" value="香港九龍尖沙咀廣東道1號">
            </div>
            <div class="form-grid">
                <div class="input-group">
                    <label for="district">地區</label>
                    <select id="district">
                        <option>香港島</option>
                        <option selected>九龍</option>
                        <option>新界</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="building">大廈/屋苑</label>
                    <input type="text" id="building" value="海港城">
                </div>
            </div>
            <div class="form-grid">
                <div class="input-group">
                    <label for="floor">樓層/單位</label>
                    <input type="text" id="floor" value="5樓501室">
                </div>
                <div class="input-group">
                    <label for="postalCode">郵政編碼</label>
                    <input type="text" id="postalCode" value="999077">
                </div>
            </div>
        </div>

        <!-- 操作按钮 -->
        <div class="btn-group" style="margin-top:2rem">
            <button class="btn btn-primary" onclick="updateProfile()">
                <svg width="18" height="18" style="margin-right:8px">
                    <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"/>
                    <path d="M17 21v-8H7v8M7 3v5h8"/>
                </svg>
                保存更改
            </button>
            <button class="btn btn-secondary" onclick="history.back()">
                取消
            </button>
        </div>
    </div>

    <script>
        // 头像预览功能
        function previewAvatar(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('avatarImage').src = e.target.result;
                    showToast('頭像已更新', 'success');
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        // 密码强度检查
        function checkPasswordStrength(password) {
            let strength = 0;
            const meter = document.getElementById('strengthMeter');
            
            // 长度检查
            if (password.length > 7) strength += 1;
            if (password.length > 11) strength += 1;
            
            // 复杂度检查
            if (password.match(/[a-z]/)) strength += 1;
            if (password.match(/[A-Z]/)) strength += 1;
            if (password.match(/[0-9]/)) strength += 1;
            if (password.match(/[^a-zA-Z0-9]/)) strength += 1;
            
            // 更新强度指示器
            let width = 0;
            let color = '#e74c3c'; // 红色
            
            if (strength > 4) {
                width = 100;
                color = '#2ecc71'; // 绿色
            } else if (strength > 2) {
                width = 66;
                color = '#f39c12'; // 橙色
            } else if (strength > 0) {
                width = 33;
            }
            
            meter.style.width = width + '%';
            meter.style.background = color;
        }

        // 更新个人资料
        function updateProfile() {
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            // 密码验证
            if (newPassword && newPassword !== confirmPassword) {
                showToast('兩次輸入的密碼不一致', 'error');
                return;
            }
            
            // 模拟API调用
            setTimeout(() => {
                showToast('個人資料已更新', 'success');
            }, 800);
        }

        // 显示提示信息
        function showToast(message, type) {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }
    </script>

    <style>
        /* 提示信息样式 */
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 12px 24px;
            border-radius: 25px;
            font-weight: 500;
            z-index: 1001;
            animation: fadeIn 0.3s;
        }

        .toast.success {
            background: var(--primary-color);
            color: white;
        }

        .toast.error {
            background: #e74c3c;
            color: white;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateX(-50%) translateY(20px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }
    </style>
</body>
</html>